<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>output: github_document</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>




</head>

<body>
<p>title: &ldquo;OMV file 1&rdquo;
author: &ldquo;RosaKalish&rdquo;</p>

<h1>output: github_document</h1>

<p>Load Packages</p>

<pre><code class="r">library(tidyverse)
</code></pre>

<pre><code>## Loading tidyverse: ggplot2
## Loading tidyverse: tibble
## Loading tidyverse: tidyr
## Loading tidyverse: readr
## Loading tidyverse: purrr
## Loading tidyverse: dplyr
</code></pre>

<pre><code>## Conflicts with tidy packages ----------------------------------------------
</code></pre>

<pre><code>## filter(): dplyr, stats
## lag():    dplyr, stats
</code></pre>

<pre><code class="r">library(lubridate)
</code></pre>

<pre><code>## 
## Attaching package: &#39;lubridate&#39;
</code></pre>

<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date
</code></pre>

<pre><code class="r">library(car)      # John Fox program for his regression text, nice recode command
</code></pre>

<pre><code>## Error in library(car): there is no package called &#39;car&#39;
</code></pre>

<pre><code class="r">library(rms)      # Frank Harrell regression modeling strategies package
</code></pre>

<pre><code>## Loading required package: Hmisc
</code></pre>

<pre><code>## Loading required package: lattice
</code></pre>

<pre><code>## Loading required package: survival
</code></pre>

<pre><code>## Loading required package: Formula
</code></pre>

<pre><code>## Error: package &#39;Hmisc&#39; could not be loaded
</code></pre>

<pre><code class="r">library(Hmisc)    # Frank Harrell miscellaneous commands package
</code></pre>

<pre><code>## Error: package or namespace load failed for &#39;Hmisc&#39;
</code></pre>

<pre><code class="r">library(broom)    # Create &quot;tidy&quot; data frames from statistical results
library(popbio)   # Matrix population package, has beautiful logit+histogram plot command
library(tidyverse)
library(data.table)
</code></pre>

<pre><code>## Error in library(data.table): there is no package called &#39;data.table&#39;
</code></pre>

<pre><code class="r">library(stringr)
library(tidyr)
</code></pre>

<p>Import and Bind Voter Data </p>

<pre><code class="r">#vote_particip &lt;- read_csv(&quot;http://bit.ly/2kG37yJ&quot;)
vote_motor &lt;- read_csv(&quot;http://bit.ly/2lCadlB&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   VOTER_ID = col_integer(),
##   DESCRIPTION = col_character(),
##   COUNTY = col_character()
## )
</code></pre>

<pre><code class="r">#These are the files with correct voting turnout data, however they are still missing registration type, which I join from the data used in Home Work 1. 
file.choose()
</code></pre>

<pre><code>## Error in file.choose(): file choice cancelled
</code></pre>

<pre><code class="r">voter1 &lt;- read_tsv(&quot;/Users/rosa/Desktop/or_voter_history/CD1_VoterHistory_Jan2017.txt&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   VOTER_ID = col_integer(),
##   HOUSE_NUM = col_integer(),
##   ZIP_CODE = col_integer(),
##   ZIP_PLUS_FOUR = col_integer(),
##   EFF_ZIP_CODE = col_integer()
## )
</code></pre>

<pre><code>## See spec(...) for full column specifications.
</code></pre>

<pre><code>## Warning: 813 parsing failures.
##  row           col   expected   actual
## 1157 HOUSE_NUM     an integer XXXXXXXX
## 1157 ZIP_CODE      an integer XXXXXXXX
## 1157 ZIP_PLUS_FOUR an integer XXXXXXXX
## 1552 HOUSE_NUM     an integer XXXXXXXX
## 1552 ZIP_CODE      an integer XXXXXXXX
## .... ............. .......... ........
## See problems(...) for more details.
</code></pre>

<pre><code class="r">voter2 &lt;- read_tsv(&quot;/Users/rosa/Desktop/or_voter_history/CD2_VoterHistory_Jan2017.txt&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   VOTER_ID = col_integer(),
##   SPLIT = col_integer()
## )
## See spec(...) for full column specifications.
</code></pre>

<pre><code>## Warning: 47880 parsing failures.
##    row   col               expected actual
## 220875 SPLIT no trailing characters      A
## 221380 SPLIT no trailing characters      A
## 221474 SPLIT no trailing characters      A
## 222477 SPLIT no trailing characters      A
## 222880 SPLIT no trailing characters      A
## ...... ..... ...................... ......
## See problems(...) for more details.
</code></pre>

<pre><code class="r">voter3 &lt;- read_tsv(&quot;/Users/rosa/Desktop/or_voter_history/CD3_VoterHistory_Jan2017.txt&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   VOTER_ID = col_integer(),
##   EFF_ZIP_CODE = col_integer(),
##   EFF_ZIP_PLUS_FOUR = col_integer()
## )
## See spec(...) for full column specifications.
</code></pre>

<pre><code>## Warning: 150 parsing failures.
##   row               col   expected actual
##  1739 VOTER_ID          an integer    ACP
##  1739 EFF_ZIP_CODE      an integer    ACP
##  1739 EFF_ZIP_PLUS_FOUR an integer    ACP
## 35253 VOTER_ID          an integer    ACP
## 35253 EFF_ZIP_CODE      an integer    ACP
## ..... ................. .......... ......
## See problems(...) for more details.
</code></pre>

<pre><code class="r">voter4 &lt;- read_tsv(&quot;/Users/rosa/Desktop/or_voter_history/CD4_VoterHistory_Jan2017.txt&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   VOTER_ID = col_integer(),
##   HOUSE_NUM = col_integer(),
##   ZIP_CODE = col_integer(),
##   ZIP_PLUS_FOUR = col_integer(),
##   EFF_ZIP_CODE = col_integer()
## )
## See spec(...) for full column specifications.
</code></pre>

<pre><code>## Warning: 975 parsing failures.
##  row           col   expected   actual
## 1125 HOUSE_NUM     an integer XXXXXXXX
## 1125 ZIP_CODE      an integer XXXXXXXX
## 1125 ZIP_PLUS_FOUR an integer XXXXXXXX
## 5192 HOUSE_NUM     an integer XXXXXXXX
## 5192 ZIP_CODE      an integer XXXXXXXX
## .... ............. .......... ........
## See problems(...) for more details.
</code></pre>

<pre><code class="r">voter5 &lt;- read_tsv(&quot;/Users/rosa/Desktop/or_voter_history/CD5_VoterHistory_Jan2017.txt&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   VOTER_ID = col_integer()
## )
## See spec(...) for full column specifications.
</code></pre>

<pre><code class="r">voter_all &lt;- rbind(voter1, voter2, voter3, voter4, voter5)
---------
#These are the voter files I downloaded from Pauls google drive, I am not currently using them. 

#voter31 &lt;- read_tsv(&quot;/Users/rosa/Documents/OMV project/data /CD1_VoterList_Jan2017.txt&quot;)
#voter32 &lt;- read_tsv(&quot;/Users/rosa/Documents/OMV project/data /CD2_VoterList_Jan2017.txt&quot;)
#voter33 &lt;- read_tsv(&quot;/Users/rosa/Documents/OMV project/data /CD3_VoterList_Jan2017.txt&quot;)
#voter34 &lt;- read_tsv(&quot;/Users/rosa/Documents/OMV project/data /CD4_VoterList_Jan2017.txt&quot;)
#voter35 &lt;- read_tsv(&quot;/Users/rosa/Documents/OMV project/data /CD5_VoterList_Jan2017.txt&quot;)

#voter3_all &lt;- rbind(voter1, voter2, voter3, voter4, voter5)


----
#voter_all &lt;- inner_join(x = voter2_all,y = vote_motor, by = &quot;VOTER_ID&quot;)

voter2_all &lt;- left_join(voter_all, vote_motor, by = &quot;VOTER_ID&quot;)
</code></pre>

<pre><code>## Error in -------------voter2_all &lt;- left_join(voter_all, vote_motor, by = &quot;VOTER_ID&quot;): object &#39;voter2_all&#39; not found
</code></pre>

<p>Tidy Vote File </p>

<pre><code class="r">voter_or &lt;- voter2_all %&gt;%
  select(VOTER_ID, FIRST_NAME, LAST_NAME, COUNTY.x, CITY, BIRTH_DATE, STATUS, PARTY_CODE, PRECINCT_NAME, PRECINCT, ZIP_CODE, `11/08/2016`, DESCRIPTION, `11/06/2012`, `11/04/2008`)
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter2_all&#39; not found
</code></pre>

<p>Import Geographic Data</p>

<pre><code class="r">#I first import Census tract data, then State Legislative district, then County. I finally import Zip Code which I use for this project. However, while the others are from the 2015 community report, the Zip Code data comes from the 2010 election, so there is not perfect demographic information. 
#file.choose()
#census &lt;- read_csv(&quot;/Users/rosa/Desktop/SEcensus.csv&quot;)

#file.choose()
#stateleg &lt;- read_csv(&quot;/Users/rosa/Desktop/SEstateleg.csv&quot;)

#file.choose()
#county &lt;- read_csv(&quot;/Users/rosa/Desktop/SEcounty.csv&quot;)

#file.choose()
zipcode &lt;- read_csv(&quot;/Users/rosa/Desktop/zipcode.csv&quot;)
</code></pre>

<pre><code>## Parsed with column specification:
## cols(
##   Geo_NAME = col_character(),
##   Geo_QName = col_character(),
##   Geo_AREALAND = col_double(),
##   Geo_AREAWATR = col_integer(),
##   Geo_SUMLEV = col_integer(),
##   Geo_GEOCOMP = col_character(),
##   Geo_FIPS = col_integer(),
##   SE_T003_001 = col_integer(),
##   SE_T003_002 = col_integer(),
##   SE_T003_003 = col_integer(),
##   SE_T054_001 = col_integer(),
##   SE_T054_002 = col_integer(),
##   SE_T054_003 = col_integer(),
##   SE_T054_004 = col_integer(),
##   SE_T054_005 = col_integer(),
##   SE_T054_006 = col_integer(),
##   SE_T054_007 = col_integer(),
##   SE_T054_008 = col_integer()
## )
</code></pre>

<p>Tidy Geographic Data </p>

<pre><code class="r">zipcode &lt;- zipcode %&gt;%
  mutate(Geo_NAME = str_replace_all(Geo_NAME, pattern = &quot;ZCTA5 &quot;, replacement = &quot;&quot;))

# Make note of which zips have &quot;(part)&quot; - For later
part_zips &lt;- zipcode %&gt;%
  filter(grepl(&quot;part&quot;, Geo_NAME))

# Clear those out
zipcode &lt;- zipcode %&gt;%
    mutate(Geo_NAME = substr(Geo_NAME, 1, 5)) %&gt;%
  rename(total_pop = SE_T003_001,
         male = SE_T003_002,
         female = SE_T003_003,
         total_pop2 = SE_T054_001,
         white = SE_T054_002,
         black = SE_T054_003, 
         ai = SE_T054_004,
         asian = SE_T054_005,
         hawaiian = SE_T054_006,
         other = SE_T054_007, 
         two = SE_T054_008,
         ZIP_CODE = Geo_NAME) 


# Just Sex
sex &lt;- zipcode %&gt;%
  select(ZIP_CODE, total_pop, male, female)

# Just Race

zipcode$p_black &lt;- zipcode$black / zipcode$total_pop
zipcode$p_white &lt;- zipcode$white / zipcode$total_pop

race &lt;- zipcode %&gt;%
  select(ZIP_CODE, total_pop, white, black, ai, asian, hawaiian, other, two, p_black, p_white)
</code></pre>

<p>Get at zip code level for Oregon registered voters</p>

<pre><code class="r">total_regs &lt;- voter_or %&gt;%
  group_by(ZIP_CODE) %&gt;%
  summarize(count = n())
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter_or&#39; not found
</code></pre>

<p>Proportion of registered that voted on Nov 2016 and Nov 2012 </p>

<pre><code class="r">prop_voted2016 &lt;- voter_or %&gt;%
  group_by(ZIP_CODE) %&gt;%
  summarize(prop_v16 = mean(`11/08/2016` == &quot;YES&quot;))
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">prop_voted2012 &lt;- voter_or %&gt;%
  group_by(ZIP_CODE) %&gt;%
  summarize(prop_v12 = mean(`11/06/2012` == &quot;YES&quot;))
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter_or&#39; not found
</code></pre>

<p>Proportion that are not Motor Voter Registered </p>

<pre><code class="r">a &lt;- (is.na(voter_or$DESCRIPTION))
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">voter_or$DESCRIPTION[a] &lt;- &quot;conventional&quot;
</code></pre>

<pre><code>## Error in voter_or$DESCRIPTION[a] &lt;- &quot;conventional&quot;: object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">voter_or$DESCRIPTION &lt;- as.factor(voter_or$DESCRIPTION)
</code></pre>

<pre><code>## Error in is.factor(x): object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">table(voter_or$DESCRIPTION)
</code></pre>

<pre><code>## Error in table(voter_or$DESCRIPTION): object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">prop_regcon &lt;- voter_or %&gt;%
  group_by(ZIP_CODE) %&gt;%
  summarize(prop_reg = mean(DESCRIPTION == &quot;conventional&quot;))
</code></pre>

<pre><code>## Error in eval(expr, envir, enclos): object &#39;voter_or&#39; not found
</code></pre>

<pre><code class="r">#Dont need this any more, also does not work. 
#votor_or2 &lt;- votor_or %&gt;%
#  mutate(DESCRIPTION = stringr::str_replace_all(DESCRIPTION, NA, &quot;Not Registered&quot;)

#MV &lt;- voter_or2 %&gt;%
  #group_by(ZIP_CODE) %&gt;%
  #summarize(prop_MV = mean(DESCRIPTION != &quot;conventional&quot;))


      # prop_motorvoter &lt;- voter_or %&gt;%
 # group_by(ZIP_CODE) %&gt;%
 # summarize(prop_NotMV = mean(`DESCRIPTION` == &quot;Not Registered&quot;))
</code></pre>

<p>Construct data sets with Voter info by Zip Code including, number of registered voters, how they registered, and the proportion that voted</p>

<pre><code class="r">zipcode_data &lt;- inner_join(x = total_regs,
                           y = prop_voted2016,
                           by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in inner_join(x = total_regs, y = prop_voted2016, by = &quot;ZIP_CODE&quot;): object &#39;total_regs&#39; not found
</code></pre>

<pre><code class="r">zipcode_data &lt;- inner_join(x = zipcode_data,
                           y = prop_voted2012,
                           by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in inner_join(x = zipcode_data, y = prop_voted2012, by = &quot;ZIP_CODE&quot;): object &#39;zipcode_data&#39; not found
</code></pre>

<pre><code class="r">zipcode_data &lt;- inner_join(x = zipcode_data,
                           y = prop_regcon,
                           by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in inner_join(x = zipcode_data, y = prop_regcon, by = &quot;ZIP_CODE&quot;): object &#39;zipcode_data&#39; not found
</code></pre>

<pre><code class="r"># Join sex with voter reg aggregated data
sex_reg &lt;- inner_join(x = sex, y = zipcode_data, 
                      by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in is.data.frame(y): object &#39;zipcode_data&#39; not found
</code></pre>

<pre><code class="r"># Join race with voter reg aggregated data
race_reg &lt;- inner_join(x = race, y = zipcode_data, 
                      by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in is.data.frame(y): object &#39;zipcode_data&#39; not found
</code></pre>

<pre><code class="r"># One set with both 

county_reg &lt;- inner_join(x = race_reg, y = sex, 
                      by = &quot;ZIP_CODE&quot;)
</code></pre>

<pre><code>## Error in inner_join(x = race_reg, y = sex, by = &quot;ZIP_CODE&quot;): object &#39;race_reg&#39; not found
</code></pre>

<p>Analysis </p>

<pre><code class="r"> ggplot(county_reg, aes(x = p_black, y = prop_reg)) +
geom_point()+
  geom_smooth(method=`lm`) 
</code></pre>

<pre><code>## Error in ggplot(county_reg, aes(x = p_black, y = prop_reg)): object &#39;county_reg&#39; not found
</code></pre>

<pre><code class="r"> ggplot(county_reg, aes(x = p_black, y = prop_reg)) +
geom_point()+
  geom_smooth(method=`lm`) 
</code></pre>

<pre><code>## Error in ggplot(county_reg, aes(x = p_black, y = prop_reg)): object &#39;county_reg&#39; not found
</code></pre>

<pre><code class="r"> ggplot(county_reg, aes(x = prop_v16, y = prop_reg)) +
geom_point()+
  geom_smooth(method=`lm`) 
</code></pre>

<pre><code>## Error in ggplot(county_reg, aes(x = prop_v16, y = prop_reg)): object &#39;county_reg&#39; not found
</code></pre>

<pre><code class="r">#this suggests that the probability of being registered to vote not through OMV, is higher for counties with both higher black and white populations. This may be explained by the fact that there are such small percentages of black voters in oregon. 
</code></pre>

<p>Extra Code </p>

<pre><code class="r">#race_reg2&lt;- race_reg %&gt;% 
  #gather(key=&quot;race&quot;, value = &quot;number&quot;, 3:9)

#sex_reg2 &lt;- sex_reg %&gt;% 
 # gather(key=&quot;sex&quot;, value = &quot;number&quot;, 3:4)

#both_regtidy &lt;-inner_join(x = race_reg2, y = sex_reg2, 
                    #  by = &quot;ZIP_CODE&quot;) 
</code></pre>

</body>

</html>

